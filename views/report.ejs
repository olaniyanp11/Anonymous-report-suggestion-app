<%- include('./partials/header') %>

<div class="bg-gray-900 text-white min-h-screen flex items-center justify-center px-4 py-20">

  <div class="w-full max-w-2xl bg-gray-800 p-8 py-10 rounded-lg shadow-lg">
    <h1 class="text-3xl font-bold mb-6 text-green-400">Submit Report / Suggestion</h1>
      <% if (error) { %>
      <div class="bg-red-100 text-red-700 p-2 rounded mb-4 text-sm text-center">
        <%= error %>
      </div>
    <% } %>

    <form action="/report" method="POST" class="space-y-6">
      <div>
        <label for="title" class="block mb-2 text-sm font-medium text-gray-300">Title</label>
        <input type="text" id="title" name="title" required class="w-full px-4 py-2 rounded bg-gray-700 border border-gray-600 text-white focus:outline-none focus:ring-2 focus:ring-green-400">
      </div>

      <div>
        <label for="category" class="block mb-2 text-sm font-medium text-gray-300">Category</label>
        <select id="category" name="category" class="w-full px-4 py-2 rounded bg-gray-700 border border-gray-600 text-white">
          <option value="suggestion">Suggestion</option>
          <option value="complaint">Report</option>
        </select>
      </div>

      <div>
        <label for="message" class="block mb-2 text-sm font-medium text-gray-300">Message</label>
        <textarea id="message" name="message" rows="5" required class="w-full px-4 py-2 rounded bg-gray-700 border border-gray-600 text-white focus:outline-none focus:ring-2 focus:ring-green-400"></textarea>
      </div>

      <button type="submit" id="submitBtn" class="bg-green-500 hover:bg-green-600 text-white font-semibold px-6 py-3 rounded transition transform hover:scale-105 shadow-lg w-full">
        Submit Anonymously
      </button>
         <!-- Loader -->
      <div id="loader" class="hidden flex justify-center mt-4">
        <div class="w-6 h-6 border-4 border-green-600 border-t-transparent rounded-full animate-spin"></div>
      </div>
    </form>
  </div>

</div>

<script>
    const submitBtn = document.getElementById('submitBtn');
  const form = document.querySelector('form');
  const loader = document.getElementById('loader');

  form.addEventListener('submit', () => {
    loader.classList.remove('hidden');
  });
  form.addEventListener('submit', (event) => {
    const submitBtn = event.target.querySelector('button[type="submit"]');
    submitBtn.disabled = true;
    submitBtn.classList.add('opacity-50', 'cursor-not-allowed');
    submitBtn.textContent = 'Submitting...';
  });
</script>
